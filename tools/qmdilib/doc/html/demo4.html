<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>qmdilib: Demo4 - Building the code as a shared library</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a class="anchor" name="demo4">Demo4 - Building the code as a shared library</a></h1>This fourth demo, shows how to build qdmilib into dynamic libraries, and also how to build new libraries which use qmdilib classes.<p>
This application uses the same code as demo2, with a single difference: all the classes of qmdilib are compiled into a library (libqmdi.so.0.0.2 on Unix/Linux and qmdi0.dll on Win32), and the extended text editor and help browser into another library (libqexedit0.so.0.0.2 on Unix/Linux and qexedit0.dll on Win32). The main binary contains only the main window and the main() function.<p>
Note that on Unix/Linux (also Mac), the application will fail to load because the loader will not be able to find the libraries. To make it work, you need to override the environment variable LD_LIBRARY_PATH to include the current directory. This example also includes a shell script which does this for you.<p>
The main project on this demo is a subdirs project, which will build the qmdilib library, the qexedit library and finally also the main application.<p>
This is the project file for qmdilib: <div class="fragment"><pre class="fragment">TEMPLATE = lib
TARGET=qmdi
VERSION=0.0.2
<span class="preprocessor">#CONFIG +=   staticlib</span>
<span class="preprocessor"></span>DESTDIR=../

MOC_DIR =  ../../../tmp/
RCC_DIR =  ../../../tmp/
UI_DIR =  ../../../tmp/
OBJECTS_DIR = ../../../tmp/
INCLUDEPATH += ../../../src .

# Input
HEADERS += ../../../src/actiongroup.h \
           ../../../src/actiongrouplist.h \
           ../../../src/qmdiclient.h \
           ../../../src/qmdihost.h \
           ../../../src/qmdiserver.h \
           ../../../src/qmditabwidget.h

SOURCES += ../../../src/actiongroup.cpp \
           ../../../src/actiongrouplist.cpp \
           ../../../src/qmdiclient.cpp \
           ../../../src/qmdihost.cpp \
           ../../../src/qmdiserver.cpp \
           ../../../src/qmditabwidget.cpp
</pre></div><p>
This is the project file for qexedit, see how it also links the qmdi library: <div class="fragment"><pre class="fragment">TEMPLATE = lib
TARGET=qexedit
VERSION=0.0.2
DESTDIR=../

MOC_DIR =  ../../../tmp/
RCC_DIR =  ../../../tmp/
UI_DIR =  ../../../tmp/
OBJECTS_DIR = ../../../tmp/
INCLUDEPATH += . ../../../src

<span class="preprocessor"># Input</span>
<span class="preprocessor"></span>unix:LIBS += -lqmdi -L../
win32:LIBS += -lqmdi0 -L../

HEADERS += ../../demo2/qexeditor.h \
           ../../demo2/helpbrowse.h

SOURCES += ../../demo2/qexeditor.cpp \
           ../../demo2/helpbrowse.cpp
</pre></div><p>
This is the project file for the main application, see how it links qmdi and qexedit, note also that on Unix the application name is modified, and end-users should run the shell script wrapper instead: <div class="fragment"><pre class="fragment">TEMPLATE = app
unix:TARGET = demo4.bin
win32:TARGET = demo4
DEPENDPATH += .
INCLUDEPATH += . ../../../src/ ../../demo2/
DESTDIR = ../

MOC_DIR =  ../../../tmp/
RCC_DIR =  ../../../tmp/
UI_DIR =  ../../../tmp/
OBJECTS_DIR = ../../../tmp/

<span class="preprocessor"># Input</span>
<span class="preprocessor"></span>unix:LIBS += -L../ -lqmdi  -lqexedit
win32:LIBS += -L../ -lqmdi0 -lqexedit0

RESOURCES += demo4.qrc
HEADERS += mainwindow4.h
SOURCES += mainwindow4.cpp  main4.cpp
</pre></div><p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="demo2.html">Demo2 - Using the new tab widget to display dynamic menus</a> <p>
<a class="el" href="small_tutor.html">Small tutorial and introduction</a> <p>
Next: <a class="el" href="demo5.html">Demo5 - Building the code as a static library</a> </dd></dl>
<hr size="1"><address style="align: right;"><small>Generated on Sat Oct 7 18:00:34 2006 for qmdilib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
