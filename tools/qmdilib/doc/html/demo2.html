<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>qmdilib: Demo2 - Using the new tab widget to display dynamic menus</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a class="anchor" name="demo2">Demo2 - Using the new tab widget to display dynamic menus</a></h1>This second demo is an introduction to the <a class="el" href="classqmdiTabWidget.html">qmdiTabWidget</a> and using it in real life applications, which load several files of the same type.<p>
The Qt libraries have some basic concept of multi document interface, but it gives you tools for doing this using top level windows. On modern applications we display the documents in QTabWidget and not top level windows. In theory, you just need to insert the new QWidgets into a QTabWidget, but then you start getting into problems when you have to synchronize the "save action" to the document currently displayed on the tab widget. The problems get bigger and harder when you are trying to insert different widget types into the QTabWidget, and you want each one to display different menus and toolbars.<p>
Using qmdilib you just need to follow a very minimal step to have very rich and dynamic applications. You just need to define your own QMainWindow as we did on demo1, and instead of using QTabWidget , you need to use <a class="el" href="classqmdiTabWidget.html">qmdiTabWidget</a>. The widgets inserted into the tab, need also to inherit <a class="el" href="classqmdiClient.html">qmdiClient</a>.<p>
<div align="center">
<img src="../mdi-tab-2.jpg" alt="mdi-tab-2.jpg">
</div>
<p>
This demo contains 3 widget types<ul>
<li>A simple QTextBrowser which will display no additional menus and toolbars.</li><li>A new class which inherits QTextEdit and <a class="el" href="classqmdiClient.html">qmdiClient</a>, which gives you a simple text editor with additional menus and toolbars</li><li>A new class which inherits QTextBrowser and <a class="el" href="classqmdiClient.html">qmdiClient</a>, which gives you a simple help browse with additional menus and toolbars</li></ul>
<p>
Please note that when you move from one tab to another, the menus and toolbars will change. Sometimes, even if you move from an editor to another editor, it will look like the toolbars did not change, but what actually happens, is that the menus and toolbars are re-created on each move, and the QActions on the toolbars belong to the active widget. This means that each QWidget inserted into the <a class="el" href="classqmdiTabWidget.html">qmdiTabWidget</a> is responsible for it's own actions.<p>
This demo has also some other compile time options. You can compile the demo to use instead of one toolbar (the default), different toolbars per mdi client. You can also use <a class="el" href="classqmdiWorkspace.html">qmdiWorkspace</a> instead of <a class="el" href="classqmdiTabWidget.html">qmdiTabWidget</a>. The definitions are in the header of the main window. Plase feel free to play with them.<p>
Here are the definitions of the new text editor the help viewer and the main window: <div class="fragment"><pre class="fragment"><span class="keyword">class </span>QexHelpBrowser: <span class="keyword">public</span> QTextBrowser, <span class="keyword">public</span> <a class="code" href="classqmdiClient.html">qmdiClient</a>
{
        ...
}

<span class="keyword">class </span>QexTextEdit : <span class="keyword">public</span> QTextEdit, <span class="keyword">public</span> <a class="code" href="classqmdiClient.html">qmdiClient</a>
{
        ...
}

<span class="keyword">class </span>MainWindow2: <span class="keyword">public</span> QMainWindow, <span class="keyword">public</span> <a class="code" href="classqmdiHost.html">qmdiHost</a>
{
        ...
}

<span class="keywordtype">void</span> MainWindow2::init_gui()
{
        <span class="comment">// create own menus</span>
        menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addAction( actionFileNew );
        menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addSeparator();
        menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addAction( actionQuit );
        menus[<span class="stringliteral">"&amp;Edit"</span>];
        menus[<span class="stringliteral">"&amp;Navigation"</span>];
        menus[<span class="stringliteral">"&amp;Search"</span>];
        menus[<span class="stringliteral">"&amp;Configuration"</span>];
        menus[<span class="stringliteral">"&amp;Help"</span>]-&gt;addAction( actionQtTopics );
        menus[<span class="stringliteral">"&amp;Help"</span>]-&gt;addAction( actionAbout );

        <span class="comment">// toolbars</span>
        toolbars[<span class="stringliteral">"main"</span>]-&gt;addAction( actionFileNew );
        toolbars[<span class="stringliteral">"main"</span>]-&gt;addAction( actionQtTopics );

        <span class="comment">// show the stuff on screen</span>
        updateGUI( <span class="keyword">this</span> );

        <span class="comment">// make the tab widget</span>
        tabWidget = <span class="keyword">new</span> <a class="code" href="classqmdiTabWidget.html">qmdiTabWidget</a>;
        tabNewBtn = <span class="keyword">new</span> QToolButton(tabWidget);
        tabNewBtn-&gt;setAutoRaise( <span class="keyword">true</span> );
        connect( tabNewBtn, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(fileNew()));
        tabNewBtn-&gt;setIcon(QIcon(<span class="stringliteral">":images/addtab.png"</span>));

        tabCloseBtn = <span class="keyword">new</span> QToolButton(tabWidget);
        tabCloseBtn-&gt;setAutoRaise( <span class="keyword">true</span> );
        connect( tabCloseBtn, SIGNAL(clicked()), <span class="keyword">this</span>, SLOT(fileClose()));
        tabCloseBtn-&gt;setIcon(QIcon(<span class="stringliteral">":images/closetab.png"</span>));

        tabWidget-&gt;setCornerWidget( tabNewBtn, Qt::TopLeftCorner );
        tabWidget-&gt;setCornerWidget( tabCloseBtn, Qt::TopRightCorner  );
        setCentralWidget( tabWidget );
}
</pre></div><p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="demo1.html">Demo1 - Advanced menus</a> <p>
<a class="el" href="small_tutor.html">Small tutorial and introduction</a> <p>
Next: <a class="el" href="demo3.html">Demo3 - Usage of QWorkspace inside qmdiTabWidget</a> </dd></dl>
<hr size="1"><address style="align: right;"><small>Generated on Sat Oct 7 18:00:34 2006 for qmdilib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
