<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>qmdilib: Demo1 - Advanced menus</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1><a class="anchor" name="demo1">Demo1 - Advanced menus</a></h1>This first demo is a basic introduction to the concept of <a class="el" href="classqmdiActionGroup.html">qmdiActionGroup</a>, <a class="el" href="classqmdiActionGroupList.html">qmdiActionGroupList</a> and <a class="el" href="classqmdiClient.html">qmdiClient</a>.<p>
Some applications have the concept of advanced menus: by default they only display a limited set of functionality to the user, and only after he chooses they show the full set of commands. This example shows how you can modify on the fly another set of commands into your application, and do this in your applications.<p>
To do this using plain Qt classes, the way for you to do this is to disable a lot of commands. The setup is really hard to implement if you want to switch between several states, and implementing a state machine. With this library, those things can become trivial.<p>
<div align="center">
<img src="../adv-menus-2.jpg" alt="adv-menus-2.jpg">
</div>
<p>
We start by defining the default menus used on this application, on a main window which derives QMainWindow <b>and</b> <a class="el" href="classqmdiHost.html">qmdiHost</a> . Note that in this example, empty menus are declared in the beginning of the application, otherwise the new menus would have been appended to the end of the menu bar. The empty menus will not be displayed on the main window.<p>
<div class="fragment"><pre class="fragment"><span class="keyword">class </span>MainWindow: <span class="keyword">public</span> QMainWindow, <span class="keyword">public</span> <a class="code" href="classqmdiHost.html">qmdiHost</a>
{
Q_OBJECT
        <span class="keyword">public</span>:
        MainWindow( QWidget *owner=NULL );
        ~MainWindow();
<span class="keyword">private</span>:
        QAction *actionQuit;
        QAction *actionShowAll;
        QAction *actionFileNew, *actionFileSave, *actionFileSaveAs;
        QAction *actionAbout, *actionAboutQt;
        QAction *test1, *test2;
        
        <a class="code" href="classqmdiClient.html">qmdiClient</a> *advanced;
};

MainWindow::MainWindow( QWidget *owner )
{
        menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addAction( actionFileNew );
        menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addAction( actionFileSave );
        menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addSeparator();
        menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addAction( actionQuit );
        menus[<span class="stringliteral">"&amp;Edit"</span>];
        menus[<span class="stringliteral">"&amp;Test"</span>];
        menus[<span class="stringliteral">"&amp;Settings"</span>]-&gt;addAction( actionShowAll );
        menus[<span class="stringliteral">"&amp;Help"</span>]-&gt;addAction( actionAbout );
        
        <span class="comment">// toolbars</span>
        toolbars[<span class="stringliteral">"Main"</span>]-&gt;addAction( actionShowAll );
</pre></div><p>
and also the advanced menus: <div class="fragment"><pre class="fragment">...
        advanced = <span class="keyword">new</span> <a class="code" href="classqmdiClient.html">qmdiClient</a>;
        advanced-&gt;menus[<span class="stringliteral">"&amp;File"</span>]-&gt;addAction( actionFileSaveAs );
        advanced-&gt;menus[<span class="stringliteral">"&amp;Test"</span>]-&gt;addAction( test1 );
        advanced-&gt;menus[<span class="stringliteral">"&amp;Test"</span>]-&gt;addAction( test2 );
        advanced-&gt;menus[<span class="stringliteral">"&amp;Help"</span>]-&gt;addAction( actionAboutQt );
        
        <span class="comment">// extra toolbars</span>
        advanced-&gt;toolbars[<span class="stringliteral">"Main"</span>]-&gt;addAction( actionQuit );
        advanced-&gt;toolbars[<span class="stringliteral">"File operations"</span>]-&gt;addAction( test1 );
        advanced-&gt;toolbars[<span class="stringliteral">"File operations"</span>]-&gt;addAction( test2 );
        
        updateGUI( <span class="keyword">this</span> );
}
</pre></div><p>
Then, all you need to do is merge or un-merge the new client, to add or remove menus and toolbars from the GUI: <div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> MainWindow::showMenus()
{
        <span class="keywordtype">bool</span> isChecked = actionShowAll-&gt;isChecked();

        <span class="keywordflow">if</span> (isChecked)
                mergeClient( advanced );
        <span class="keywordflow">else</span>
                unmergeClient( advanced );

        <span class="comment">// show the stuff on screen</span>
        updateGUI( <span class="keyword">this</span> );
}
</pre></div><p>
<dl compact><dt><b>See also:</b></dt><dd>Next: <a class="el" href="demo2.html">Demo2 - Using the new tab widget to display dynamic menus</a> </dd></dl>
<hr size="1"><address style="align: right;"><small>Generated on Sat Oct 7 18:00:34 2006 for qmdilib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.4 </small></address>
</body>
</html>
